<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.interview.qa.persistence.mapper.QuestionMapper">
    <sql id="ALL_COLUMNS">
        id,
        `type`,
        content,
        `level`,
        update_time,
        create_time,
        tags,
        answer,
        uid
    </sql>

    <select id="findQuestionsByCondition" parameterType="com.interview.qa.domain.model.condition.QuestionsCondition">
        SELECT
        <include refid="ALL_COLUMNS"/>
        FROM question
        <where>
            <if test="type != null">
                AND `type` = #{type}
            </if>
            <if test="level != null">
                AND `level` = #{level}
            </if>
            <if test="tags != null">
                AND tags = #{tags}
            </if>
            <if test="uid != null">
                AND uid = #{uid}
            </if>
        </where>
        ORDER BY update_time DESC
        LIMIT #{offset}, #{limit}
    </select>


</mapper>